<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>UD09 – Tarea 2 – Registro GNU/Linux II</title>

<style>
body {
    margin: 0;
    background: #0d0d0d;
    color: #00ff88;
    font-family: 'Consolas', monospace;
}
header {
    padding: 30px;
    text-align: center;
    font-size: 32px;
    font-weight: bold;
    background: black;
    border-bottom: 2px solid #00ff88;
}
.contenedor {
    width: 90%;
    max-width: 900px;
    margin: 40px auto;
}
.paso {
    background: rgba(0,255,80,0.06);
    border: 1px solid #00ff88;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 30px;
}
img {
    width: 100%;
    margin-top: 10px;
    border: 1px solid #00ff88;
}
pre {
    background: #111;
    padding: 10px;
    border-radius: 5px;
    overflow-x: auto;
}
</style>
</head>

<body>

<header>UD09 – Tarea 2: Registro GNU/Linux II (journalctl avanzado)</header>

<div class="contenedor">

<div class="paso">
<h3>27.3 – Listado de arranques del sistema</h3>

<pre>journalctl --list-boots</pre>

<p>
El comando consulta la base de datos binaria del journal ubicada en
<code>/var/log/journal/</code> y muestra todos los arranques registrados.
Cada entrada incluye:
</p>

<ul>
<li>Indice del arranque (0 actual, -1 anterior, etc).</li>
<li>Identificador unico del boot.</li>
<li>Fecha y hora de inicio y finalizacion.</li>
</ul>

<p>
Esta informacion es fundamental para analisis forense o
investigacion de problemas ocurridos en un arranque concreto.
</p>

<img src="media/27.3.PNG">
</div>

<div class="paso">
<h3>27.4 – Logs del arranque actual</h3>

<pre>journalctl -b</pre>

<p>
El parametro <strong>-b</strong> filtra los eventos del arranque actual.
Permite analizar:
</p>

<ul>
<li>Inicializacion del kernel.</li>
<li>Carga de modulos.</li>
<li>Arranque de servicios systemd.</li>
<li>Errores durante el inicio.</li>
</ul>

<p>
Es una herramienta clave para diagnosticar fallos al iniciar el sistema.
</p>

<img src="media/27.4.PNG">
</div>

<div class="paso">
<h3>27.5 – Logs del arranque anterior</h3>

<pre>journalctl -b -1</pre>

<p>
-b -1 indica el arranque inmediatamente anterior.
Permite comparar comportamientos entre diferentes inicios
del sistema.
</p>

<img src="media/27.5.PNG">
</div>

<div class="paso">
<h3>27.6 – Eventos del disco durante el arranque anterior</h3>

<pre>sudo journalctl -b -1 | grep -i sda</pre>

<p>
Se filtran eventos relacionados con el dispositivo principal.
Aqui se observa:
</p>

<ul>
<li>Deteccion del disco por el kernel.</li>
<li>Particiones detectadas (sda1, sda2, etc).</li>
<li>Montaje del sistema de archivos.</li>
<li>Activacion de LVM.</li>
</ul>

<p>
Este analisis es esencial cuando existen problemas de
arranque o corrupcion de sistemas de archivos.
</p>

<img src="media/27.6.PNG">
</div>

<div class="paso">
<h3>27.7 – Mensajes del kernel</h3>

<pre>sudo journalctl -k -b -1</pre>

<p>
El parametro <strong>-k</strong> muestra exclusivamente mensajes del kernel,
equivalente al comando <code>dmesg</code> pero integrado en journalctl.
Permite analizar:
</p>

<ul>
<li>Deteccion de hardware.</li>
<li>Controladores cargados.</li>
<li>Errores de memoria o CPU.</li>
</ul>

<img src="media/27.7.PNG">
</div>

<div class="paso">
<h3>27.8 – Script ultimas 10 entradas por programa</h3>

<p>
Se crea un script que consulta el journal filtrando por comando
(_COMM) o por unidad systemd (-u).
</p>

<pre>
sudo journalctl _COMM=scite -n 10
sudo journalctl _COMM=firefox -n 10
sudo journalctl -u NetworkManager -n 10
sudo journalctl _COMM=sensors -n 10
</pre>

<p>
El parametro <strong>-n 10</strong> limita la salida a las ultimas 10 entradas,
lo cual resulta util para diagnostico rapido.
</p>

<img src="media/27.8.PNG">
</div>

<div class="paso">
<h3>27.9 – Logs del usuario root</h3>

<pre>sudo journalctl _UID=0 -n 20</pre>

<p>
_UID=0 corresponde al superusuario.
Se pueden observar:
</p>

<ul>
<li>Comandos ejecutados mediante sudo.</li>
<li>Apertura y cierre de sesiones.</li>
<li>Acciones administrativas.</li>
</ul>

<p>
Este filtro es importante en auditorias de seguridad.
</p>

<img src="media/27.9.PNG">
</div>

<div class="paso">
<h3>27.10 – Script logs por grupo</h3>

<p>
El script obtiene los usuarios pertenecientes a un grupo mediante
<code>getent group</code>, extrae sus UID y consulta el journal
para cada uno.
</p>

<img src="media/27.10.PNG">
</div>

<div class="paso">
<h3>27.11 – NetworkManager ultimas 36 horas</h3>

<pre>sudo journalctl -u NetworkManager --since "36 hours ago"</pre>

<p>
Permite analizar eventos recientes relacionados con la gestion
de red, desconexiones, renovacion DHCP o cambios de interfaz.
</p>

<img src="media/27.11.PNG">
</div>

<div class="paso">
<h3>27.12 – NetworkManager ultima semana</h3>

<pre>sudo journalctl -u NetworkManager --since "7 days ago"</pre>

<p>
Analisis historico para detectar patrones de fallo o
problemas recurrentes de conectividad.
</p>

<img src="media/27.12.PNG">
</div>

<div class="paso">
<h3>27.13 – Logs del usuario miguelc ayer</h3>

<pre>sudo journalctl _UID=$(id -u miguelc) --since "yesterday" --until "today"</pre>

<p>
El mensaje <strong>-- No entries --</strong> indica ausencia de actividad
registrada en ese periodo.
Esto confirma que el filtro funciona correctamente.
</p>

<img src="media/27.13.PNG">
</div>

<div class="paso">
<h3>27.15 – Funcionamiento del visor grafico GNOME Logs</h3>

<p>
Se reinicia el servicio NetworkManager para generar actividad:
</p>

<pre>sudo systemctl restart NetworkManager</pre>

<p>
Posteriormente se abre GNOME Logs y se filtra por el servicio,
visualizando los eventos generados.
</p>

<img src="media/27.15.PNG">
</div>

<h2>Manual de uso – GNOME Logs</h2>

<div class="paso">

<p>
GNOME Logs es una interfaz grafica que permite consultar
la base de datos del journal sin necesidad de linea de comandos.
</p>

<h3>Instalacion</h3>
<pre>sudo apt install gnome-logs</pre>

<h3>Uso basico</h3>
<ul>
<li>Seleccionar categoria en panel lateral.</li>
<li>Buscar por palabra clave.</li>
<li>Filtrar por servicio.</li>
<li>Analizar nivel de prioridad.</li>
</ul>

<h3>Ventajas</h3>
<ul>
<li>Visualizacion estructurada.</li>
<li>Facil interpretacion de errores.</li>
<li>Util para administradores menos orientados a CLI.</li>
</ul>

<p>
Resulta especialmente util para diagnostico rapido y supervision
de servicios del sistema.
</p>

</div>

<h2>Conclusion</h2>

<p>
Se ha realizado un analisis avanzado del sistema de registros
basado en systemd-journald, aplicando filtros por arranque,
kernel, servicio, usuario, grupo y rango temporal.
Estas tecnicas son fundamentales en administracion de sistemas,
seguridad y analisis de incidencias.
</p>

</div>

</body>
</html>
